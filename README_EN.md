# Go Game

A complete Go game developed in Racket, supporting Chinese rules (area scoring).

99% of the code generated by QWen LLM.

![Screenshot](./docs/Screenshot-go-rkt-1.0.png)

## Project Structure

```
go-rkt/
â”œâ”€â”€ src/              # Core source code
â”‚   â”œâ”€â”€ board.rkt         # Board data structures and operations
â”‚   â”œâ”€â”€ stone.rkt         # Stone type definitions
â”‚   â”œâ”€â”€ rules.rkt         # Go rules engine (core algorithms)
â”‚   â”œâ”€â”€ game-engine.rkt   # Main game engine
â”‚   â”œâ”€â”€ game-state.rkt    # Game state management
â”‚   â”œâ”€â”€ custom-format.rkt # Custom game record format handling
â”‚   â”œâ”€â”€ sgf-format.rkt    # SGF standard format handling
â”‚   â”œâ”€â”€ ko-rule.rkt       # Ko rule implementation
â”‚   â”œâ”€â”€ scoring.rkt       # Scoring system
â”‚   â”œâ”€â”€ gui-main.rkt      # Graphical user interface
â”‚   â””â”€â”€ main.rkt          # Program entry point
â”œâ”€â”€ tests/            # Test files
â”‚   â””â”€â”€ *test*.rkt        # Various feature tests
â”œâ”€â”€ analysis/         # Analysis and debugging tools
â”‚   â””â”€â”€ *analysis*.rkt    # Problem analysis and algorithm debugging
â”œâ”€â”€ data/             # Game data files
â”‚   â””â”€â”€ game-01.txt       # Sample game record
â”œâ”€â”€ docs/             # Documentation
â””â”€â”€ README.md         # Project documentation (Chinese)
```

## Features

### ğŸ¯ Core Game Features
- âœ… **Complete Go Rules**: Supports Chinese rules (area scoring)
- âœ… **Move Validation**: Automatically detects illegal moves (suicide, ko, etc.)
- âœ… **Real-time Scoring**: Dynamically displays captured stones for both players
- âœ… **Position Analysis**: One-click popup showing current territory and lead
- âœ… **Game End Detection**: Automatically detects double-pass and calculates winner

### ğŸ“ Game Record Features
- âœ… **SGF Format Support**: Save and load standard SGF game records
- âœ… **Custom Format**: Human-readable text format for saving games
- âœ… **Move History**: Complete record of the game

### ğŸ” Replay Features
- âœ… **Undo**: Support for undoing moves
- âœ… **Replay Mode**: Switch between game mode and replay mode
- âœ… **Player-style Controls**: Jump to first/last move, forward/back 1 or 5 moves
- âœ… **Read-only Review**: Placing stones, passing, resigning, and undoing are disabled in replay mode

### ğŸ–¥ï¸ Graphical Interface
- âœ… **Intuitive Board**: 19Ã—19 standard board display
- âœ… **Mouse Control**: Click to place stones
- âœ… **Status Display**: Real-time display of current player, scores, etc.
- âœ… **Menu System**: Complete file operations and game controls
- âœ… **Multi-language UI**: Supports Chinese/English switching (English by default)

## Project Architecture

### Layered Design
```
User Interface Layer (GUI)
    â†“
Game Logic Layer (Game Engine)
    â†“
Rules Engine Layer (Rules/Ko/Scoring)
    â†“
Data Model Layer (Board/Stone/Game State)
```

### Module Structure

#### Data Model Layer
- `board.rkt` - Board data structures and basic operations
- `stone.rkt` - Stone data structures and color management
- `game-state.rkt` - Game state and move history management

#### Rules Engine Layer
- `rules.rkt` - Core Go rules (move validation, connectivity analysis)
- `ko-rule.rkt` - Ko rule handling
- `scoring.rkt` - Chinese rules area scoring

#### Game Logic Layer
- `game-engine.rkt` - Main game controller, integrating all rules

#### Persistence Layer
- `sgf-format.rkt` - SGF standard format support
- `custom-format.rkt` - Custom text format

#### User Interface Layer
- `gui-main.rkt` - Complete graphical user interface

## Usage

### Start the Game
```bash
racket src/main.rkt
```

### Load a Game at Startup
```bash
racket src/main.rkt --load data/game-01.txt
racket src/main.rkt -l data/game-01.txt
```

The `--load`/`-l` option supports `.sgf` and `.txt` files.

### Set Interface Language
```bash
racket src/main.rkt --lang en   # English (default)
racket src/main.rkt --lang zh   # Chinese
```

### View Command Line Help
```bash
racket src/main.rkt --help
racket src/main.rkt -h
```

### Basic Operations
1. **Place Stone**: Click on the desired position on the board
2. **Pass**: Click the "Pass" button on the control panel
3. **Resign**: Click the "Resign" button on the control panel
4. **Undo**: Click the "Undo" button on the control panel
5. **Position**: Click the "Position" button to see current territory and lead
6. **Replay Mode**: Click "Replay" to enter replay mode, button changes to "Exit", click again to exit
7. **Language Switch**: Select "Chinese" or "English" from the Language menu

### Replay Controls
- `|<`: Jump to first move
- `<`: Go back 1 move
- `<<`: Go back 5 moves
- `>`: Go forward 1 move
- `>>`: Go forward 5 moves
- `>|`: Jump to last move

### File Operations
- **New Game**: File menu â†’ New Game
- **Save Record**: File menu â†’ Save SGF / Save Custom Format
- **Load Record**: File menu â†’ Open SGF / Open Custom Format

## Technical Features

### Functional Programming Style
- Immutable data structures
- State changes through new instances rather than mutation
- Pure function design, easy to test and debug

### Modular Design
- High cohesion, low coupling
- Clear interface definitions
- Easy to extend and maintain

### Complete Test Coverage
- Each module has independent unit tests
- Uses Racket's rackunit testing framework
- Ensures code quality and stability

## Development Environment

- **Language**: Racket 8.0+
- **GUI Library**: racket/gui
- **Testing Framework**: rackunit

## Known Issues

- Board grid lines have inconsistent thickness
- Clicking on a position with a stone shows "illegal move" message

## Future Extensions

### Rule Extensions
- Support Japanese rules / Ing rules
- Add handicap game feature
- Implement time control

### Interface Improvements
- Add sound effects
- Implement animations
- Support themes/skins

### Network Features
- Online play support
- Game record sharing platform
- AI opponent integration

## License

MIT License

## Author

Go game developed in Racket

Started from: QWEN Go game programming https://chatgpt.com/share/698b0279-2688-800e-8169-78737f683d02
